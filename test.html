<h1 id="pythonxpath"><a href="https://www.cnblogs.com/MUMO/p/5732836.html">Python爬虫：Xpath语法笔记</a></h1>
<h4 id="_1">一、选取节点</h4>
<p>常用的路劲表达式：</p>
<table>
<thead>
<tr>
<th>表达式</th>
<th>描述</th>
<th>实例</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>nodename</td>
<td>选取nodename节点的所有子节点</td>
<td>xpath(‘//div’)</td>
<td>选取了div节点的所有子节点</td>
</tr>
<tr>
<td>/</td>
<td>从根节点选取</td>
<td>xpath(‘/div’)</td>
<td>从根节点上选取div节点</td>
</tr>
<tr>
<td>//</td>
<td>选取所有的当前节点，不考虑他们的位置</td>
<td>xpath(‘//div’)</td>
<td>选取所有的div节点</td>
</tr>
<tr>
<td>.</td>
<td>选取当前节点</td>
<td>xpath(‘./div’)</td>
<td>选取当前节点下的div节点</td>
</tr>
<tr>
<td>..</td>
<td>选取当前节点的父节点</td>
<td>xpath(‘..’)</td>
<td>回到上一个节点</td>
</tr>
<tr>
<td>@</td>
<td>选取属性</td>
<td>xpath（’//@calss’）</td>
<td>选取所有的class属性</td>
</tr>
</tbody>
</table>
<h4 id="_2">二、谓语</h4>
<p>谓语被嵌在方括号内，用来查找某个特定的节点或包含某个制定的值的节点</p>
<p>实例：</p>
<table>
<thead>
<tr>
<th>表达式</th>
<th>结果</th>
</tr>
</thead>
<tbody>
<tr>
<td>xpath(‘/body/div[1]’)</td>
<td>选取body下的第一个div节点</td>
</tr>
<tr>
<td>xpath(‘/body/div[last()]’)</td>
<td>选取body下最后一个div节点</td>
</tr>
<tr>
<td>xpath(‘/body/div[last()-1]’)</td>
<td>选取body下倒数第二个div节点</td>
</tr>
<tr>
<td>xpath(‘/body/div[positon()&lt;3]’)</td>
<td>选取body下前两个div节点</td>
</tr>
<tr>
<td>xpath(‘/body/div[@class]’)</td>
<td>选取body下带有class属性的div节点</td>
</tr>
<tr>
<td>xpath(‘/body/div[@class=”main”]’)</td>
<td>选取body下class属性为main的div节点</td>
</tr>
<tr>
<td>xpath(‘/body/div[price&gt;35.00]’)</td>
<td>选取body下price元素值大于35的div节点</td>
</tr>
</tbody>
</table>
<h4 id="_3">三、通配符</h4>
<p>Xpath通过通配符来选取未知的XML元素</p>
<table>
<thead>
<tr>
<th>表达式</th>
<th>结果</th>
</tr>
</thead>
<tbody>
<tr>
<td>xpath（’/div/*’）</td>
<td>选取div下的所有子节点</td>
</tr>
<tr>
<td>xpath(‘/div[@*]’)</td>
<td>选取所有带属性的div节点</td>
</tr>
</tbody>
</table>
<h4 id="_4">四、取多个路径</h4>
<p>使用“|”运算符可以选取多个路径</p>
<table>
<thead>
<tr>
<th>表达式</th>
<th>结果</th>
</tr>
</thead>
<tbody>
<tr>
<td>xpath(‘//div</td>
<td>//table’)</td>
</tr>
</tbody>
</table>
<h4 id="xpath">五、Xpath轴</h4>
<p>轴可以定义相对于当前节点的节点集</p>
<table>
<thead>
<tr>
<th>轴名称</th>
<th>表达式</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>ancestor</td>
<td>xpath(‘./ancestor::*’)</td>
<td>选取当前节点的所有先辈节点（父、祖父）</td>
</tr>
<tr>
<td>ancestor-or-self</td>
<td>xpath(‘./ancestor-or-self::*’)</td>
<td>选取当前节点的所有先辈节点以及节点本身</td>
</tr>
<tr>
<td>attribute</td>
<td>xpath(‘./attribute::*’)</td>
<td>选取当前节点的所有属性</td>
</tr>
<tr>
<td>child</td>
<td>xpath(‘./child::*’)</td>
<td>返回当前节点的所有子节点</td>
</tr>
<tr>
<td>descendant</td>
<td>xpath(‘./descendant::*’)</td>
<td>返回当前节点的所有后代节点（子节点、孙节点）</td>
</tr>
<tr>
<td>following</td>
<td>xpath(‘./following::*’)</td>
<td>选取文档中当前节点结束标签后的所有节点</td>
</tr>
<tr>
<td>following-sibing</td>
<td>xpath(‘./following-sibing::*’)</td>
<td>选取当前节点之后的兄弟节点</td>
</tr>
<tr>
<td>parent</td>
<td>xpath(‘./parent::*’)</td>
<td>选取当前节点的父节点</td>
</tr>
<tr>
<td>preceding</td>
<td>xpath(‘./preceding::*’)</td>
<td>选取文档中当前节点开始标签前的所有节点</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>preceding-sibling</th>
<th>xpath(‘./preceding-sibling::*’)</th>
<th>选取当前节点之前的兄弟节点</th>
</tr>
</thead>
<tbody>
<tr>
<td>self</td>
<td>xpath(‘./self::*’)</td>
<td>选取当前节点</td>
</tr>
</tbody>
</table>
<h4 id="_5">六、功能函数</h4>
<p>使用功能函数能够更好的进行模糊搜索</p>
<table>
<thead>
<tr>
<th>函数</th>
<th>用法</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>starts-with</td>
<td>xpath(‘//div[starts-with(@id,”ma”)]‘)</td>
<td>选取id值以ma开头的div节点</td>
</tr>
<tr>
<td>contains</td>
<td>xpath(‘//div[contains(@id,”ma”)]‘)</td>
<td>选取id值包含ma的div节点</td>
</tr>
<tr>
<td>and</td>
<td>xpath(‘//div[contains(@id,”ma”) and contains(@id,”in”)]‘)</td>
<td>选取id值包含ma和in的div节点</td>
</tr>
<tr>
<td>text()</td>
<td>xpath(‘//div[contains(text(),”ma”)]‘)</td>
<td>选取节点文本包含ma的div节点</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>scrapy xpath文档：<a href="http://doc.scrapy.org/en/0.14/topics/selectors.html"><a href="http://doc.scrapy.org/en/0.14/topics/selectors.html">http://doc.scrapy.org/en/0.14/topics/selectors.html</a></a></p>